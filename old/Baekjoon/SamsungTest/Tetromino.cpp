#define FILE_PATH "/Users/pd3chae/Xcode/test/test1/test1/input.txt"
#include <iostream>
#include <cstring>

using namespace std;

int shapes[19][4][4]{
    {
        {1,1,1,1},
        {0,0,0,0},
        {0,0,0,0},
        {0,0,0,0},
    },
    {
        {1,0,0,0},
        {1,0,0,0},
        {1,0,0,0},
        {1,0,0,0},
    },
    {
        {1,1,0,0},
        {1,1,0,0},
        {0,0,0,0},
        {0,0,0,0},
    },
    {
        {1,0,0,0},
        {1,1,0,0},
        {0,1,0,0},
        {0,0,0,0},
    },
    {
        {0,1,1,0},
        {1,1,0,0},
        {0,0,0,0},
        {0,0,0,0},
    },
    {
        {0,1,0,0},
        {1,1,0,0},
        {1,0,0,0},
        {0,0,0,0},
    },
    {
        {1,1,0,0},
        {0,1,1,0},
        {0,0,0,0},
        {0,0,0,0},
    },
    {
        {1,1,1,0},
        {0,1,0,0},
        {0,0,0,0},
        {0,0,0,0},
    },
    {
        {0,1,0,0},
        {1,1,1,0},
        {0,0,0,0},
        {0,0,0,0},
    },
    {
        {1,0,0,0},
        {1,1,0,0},
        {1,0,0,0},
        {0,0,0,0},
    },
    {
        {0,1,0,0},
        {1,1,0,0},
        {0,1,0,0},
        {0,0,0,0},
    },
    {
        {0,1,0,0},
        {0,1,0,0},
        {1,1,0,0},
        {0,0,0,0},
    },
    {
        {1,0,0,0},
        {1,1,1,0},
        {0,0,0,0},
        {0,0,0,0},
    },
    {
        {1,1,0,0},
        {1,0,0,0},
        {1,0,0,0},
        {0,0,0,0},
    },
    {
        {1,1,1,0},
        {0,0,1,0},
        {0,0,0,0},
        {0,0,0,0},
    },
    {
        {1,0,0,0},
        {1,0,0,0},
        {1,1,0,0},
        {0,0,0,0},
    },
    {
        {1,1,1,0},
        {1,0,0,0},
        {0,0,0,0},
        {0,0,0,0},
    },
    {
        {1,1,0,0},
        {0,1,0,0},
        {0,1,0,0},
        {0,0,0,0},
    },
    {
        {0,0,1,0},
        {1,1,1,0},
        {0,0,0,0},
        {0,0,0,0},
    }
};

int N, M;
int map[500][500];
int main(void){
    freopen(FILE_PATH, "r", stdin);
    
    memset(map, 0, sizeof(map));
    cin >> N >> M;
    for(int i=0; i != N; ++i){
        for(int j=0; j != M; ++j){
            cin >> map[i][j];
        }
    }
    long long answer = 0;
    for(int i=0; i != 19; ++i){
        for(int start_i=0; start_i != N; ++start_i){
                for(int start_j=0; start_j != M; ++start_j){
                    long long tmp = 0;
                    for(int r=0; r != 4; ++r){
                        if(start_i+r < 0 || start_i+r >= N)
                            continue;
                        for(int c=0; c != 4; ++c){
                             if(start_j+c < 0 || start_j+c >= M)
                                continue;
                            tmp = tmp + shapes[i][r][c] * map[start_i+r][start_j+c];
                            if(answer < tmp){
                                answer = tmp;
                            }
                        }
                    }
                }
        }
    }
    
    cout << answer << endl;
}
